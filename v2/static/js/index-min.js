/** 
 * Copyright 2014, Kugou.com 
 * LastChange: Tuesday, September 16, 2014, 16:01:55
 * Compressed By Grunt 
 */ 
 var _index=window._index||{};_index.page={jumpKey:null,isJump:!1,_default:{curPage:1,pageSize:20,totalPage:0,btnFirst:"btn_page_first",btnPrev:"btn_page_prev",putJump:"jumppage",btnNext:"btn_page_next",btnLast:"btn_page_last",url:""},jumpPage:function(){var a=_index.page,b=document;a.isJump=!0;var c=b.getElementById(a._default.putJump),d=c.value.trim(),e="^[0-9]+$",f=new RegExp(e,"gi");url=a._default.url,d=parseInt(d,10),f.test(d)&&""!==d?d!=parseInt(a._default.curPage,10)&&d>0&&d<=parseInt(a._default.totalPage,10)?(a._default.curPage=d,url=url.replace(/\{\$page\}/gi,a._default.curPage),location.replace(url)):(a.resetPage(),a.isJump=!1,a.setPage()):(a.resetPage(),a.isJump=!1,a.setPage())},setPage:function(){var a=_index.page,b=document;a.resetPage(),b.getElementById(a._default.putJump)&&Kg.$("#"+a._default.putJump).val(a._default.curPage+"/"+a._default.totalPage),b.getElementById("mod_player")&&(b.getElementById("mod_player").style.visibility="visible")},fixedPage:function(){navigator.userAgent.match(/MQQBrowser/i)||Kg.$("#mod_page").css({position:"fixed",bottom:"0",left:"0"})},resetPage:function(){Kg.$("#mod_page").css({width:"100%",position:"relative",bottom:"auto",left:"auto"})},bind:function(){var a=_index.page,b=document;b.getElementById(a._default.btnFirst)&&Kg.$("#"+a._default.btnFirst).addEvent("click",function(b){Kg.stopEvent(b);var c=a._default.url;return 1!=Number(a._default.curPage)&&(a._default.curPage=1,c=c.replace(/\{\$page\}/gi,a._default.curPage),location.replace(c)),!1}),b.getElementById(a._default.btnNext)&&Kg.$("#"+a._default.btnNext).addEvent("click",function(b){Kg.stopEvent(b);var c=a._default.url;return Number(a._default.curPage)<Number(a._default.totalPage)&&(a._default.curPage++,c=c.replace(/\{\$page\}/gi,a._default.curPage),location.href=c,location.replace(c)),!1}),b.getElementById(a._default.btnPrev)&&Kg.$("#"+a._default.btnPrev).addEvent("click",function(b){Kg.stopEvent(b);var c=a._default.url;return Number(a._default.curPage)>1&&(a._default.curPage--,c=c.replace(/\{\$page\}/gi,a._default.curPage),location.replace(c)),!1}),b.getElementById(a._default.btnLast)&&Kg.$("#"+a._default.btnLast).addEvent("click",function(b){Kg.stopEvent(b);var c=a._default.url;return Number(a._default.curPage)!=Number(a._default.totalPage)&&(a._default.curPage=a._default.totalPage,c=c.replace(/\{\$page\}/gi,a._default.curPage),location.replace(c)),!1}),b.getElementById(a._default.putJump)&&Kg.$("#"+a._default.putJump).addEvent("click",function(c){Kg.stopEvent(c),a.fixedPage();var d=this,e=d.value;(e.match("/")||""===e)&&(d.value=""),b.getElementById("mod_player")&&(b.getElementById("mod_player").style.visibility="hidden")}).addEvent("focus",function(c){Kg.stopEvent(c),a.fixedPage();var d=this,e=d.value;(e.match("/")||""===e)&&(d.value=""),b.getElementById("mod_player")&&(b.getElementById("mod_player").style.visibility="hidden")}).addEvent("keyup",function(){clearTimeout(_index.page.jumpKey),a.jumpKey=setTimeout(function(){a.jumpPage()},1e3)}).addEvent("change",function(){clearTimeout(_index.page.jumpKey),a.jumpKey=setTimeout(function(){a.jumpPage()},1e3)}).addEvent("input",function(){clearTimeout(_index.page.jumpKey),a.jumpKey=setTimeout(function(){a.jumpPage()},1e3)}).addEvent("blur",function(){a.isJump||a.setPage(),a.resetPage(),b.getElementById("mod_player")&&(b.getElementById("mod_player").style.visibility="visible")})},init:function(a){var b=_index.page;if(a){for(var c in a)b._default[c]=a[c];b.setPage(),b.bind()}}},_index.url={getSongInfo:"http://m.kugou.com/app/i/getSongInfo.php",getSingerHead:"http://m.kugou.com/app/i/getSingerHead_new.php",defaultSingerHead:"http://m.kugou.com/static/images/index2013/default.png",defaultPic:"http://m.kugou.com/static/images/index2013/default_ban.jpg",loadingImg:"http://m.kugou.com/static/images/index2013/loading.gif",banner:"http://mobilecdn.kugou.com/new/app/i/tool.php",specialUrl:"http://mobilecdn.kugou.com/new/app/i/quku.php",specialInfo:"http://mobilecdn.kugou.com/new/app/i/quku.php",fmUrl:"http://m.kugou.com/app/i/fmList.php",fmSongsUrl:"http://m.kugou.com/app/i/fmSongs.php",listurl:"http://mobilecdn.kugou.com/new/app/i/yueku.php",singerClassUrl:"http://mobilecdn.kugou.com/new/app/i/singer.php",singerInfoUrl:"http://mobilecdn.kugou.com/api/v3/singer/info",singerSongsList:"http://mobilecdn.kugou.com/api/v3/singer/song",searchTagsUrl:"http://mobilecdn.kugou.com/api/v3/search/hot",searchUrl:"http://mobilecdn.kugou.com/api/v3/search/song",lrc:"http://m.kugou.com/app/i/krc.php",loginAndRegUrl:"http://m.kugou.com/app/i/loginAndReg.php",collectUrl:"http://mobileservice.kugou.com/new/app/i/html5.php",ringUrl:"http://m.kugou.com/app/i/getcrbt.php",newsongUrl:"http://mobilecdn.kugou.com/api/v3/rank/newsong",logCount:"http://playmusiclog.kugou.com"},_index.global={bannerData:[],isShowSlider:!0,slider:null,isCover:!1,curTab:0,lazy:null,bindPop:function(){var a=document;a.getElementById("pop_down")&&Kg.$("#pop_down .close").addEvent("click",function(){Kg.$("#pop_down").hide()}),a.getElementById("pop_base")&&Kg.$("#pop_base .close").addEvent("click",function(){Kg.$("#pop_base").hide()})},search:{detail:{data:[],keyword:"",isLoad:!1,pageSize:10,curPage:1},tags:{count:10},isInit:!1},collect:{detail:{data:[],cid:null,isOver:!1,isLoad:!1,pageSize:20,curPage:1},data:[],isInit:!1},playlist:{detail:{data:[],sid:null,ctype:1,isOver:!1,isLoad:!1,pageSize:20,curPage:1},data:[],isOver:!1,isLoad:!1,pageSize:8,curPage:1},fmlist:{detail:{data:[],fmid:null,isLoad:!1,pageSize:10,offset:""},data:[],isOver:!1,isLoad:!1,pageSize:10,curPage:1},ringlist:{detail:{data:[],isOver:!1,isLoad:!1,pageSize:80,curPage:1},musicId:null,sendMusicId:null,mobile:null,data:[],curPage:1},popBase:function(a){{var b=Kg.$("#pop_base"),c=(Kg.$("#pop_bg"),document),d=(c.body.scrollHeight,c.body.offsetHeight),e=c.body.scrollTop||c.documentElement.scrollTop;c.body.offsetWidth,window.screen.height}switch(a.type){case"forget":b.find(".html_pop_forget").show()}b.css({top:parseInt(d/2,10)+e+"px"}).show()},popDown:function(){{var a=Kg.$("#pop_down"),b=document,c=(Kg.$("#pop_bg"),b.body.scrollHeight,b.body.offsetHeight),d=b.body.scrollTop||b.documentElement.scrollTop;b.body.offsetWidth}a.css({top:parseInt(c/2,10)+d+"px"}).show()},bind:function(){var a=document;a.getElementById("btn_back")&&Kg.$("#btn_back").addEvent("click",function(a){return Kg.stopEvent(a),_index.funs.goBack(),!1}),a.getElementById("btn_search")&&Kg.$("#btn_search").addEvent("click",function(a){return Kg.stopEvent(a),_index.funs.goSearch(),!1})}},_index.util={getBytes:function(a){for(var b=0,c=0;c<a.str.length;c++)b+=a.str.charCodeAt(c)>256?2:1;return b},Cookie:{read:function(a,b){var c="",d=a+"=",e={};if(document.cookie.length>0&&(offset=document.cookie.indexOf(d),-1!=offset&&(offset+=d.length,end=document.cookie.indexOf(";",offset),-1==end&&(end=document.cookie.length),c=document.cookie.substring(offset,end))),b){for(var f=c.split("&"),g=0,h=f.length;h>g;g++){var i=f[g].split("=");e[i[0]]=i[1]}return e[b]}return c},remove:function(a){var b=a.name+"=";a.path&&(b+="; path="+a.path),a.domain&&(b+=";domain="+a.domain),b+="; expires=Fri, 02-Jan-1970 00:00:00 GMT",document.cookie=b}},isOnline:function(){return navigator.onLine?!0:!1},randomSort:function(){return Math.random()>.5?-1:1},queryString:function(a){var b=location.search.match(new RegExp("[\\?\\&]"+a+"=([^\\&]*)(\\&?)","i"));return b?b[1]:b},getSingerImg:function(a){var b="about:blank";return a.img&&(b=a.img.replace(/softhead\//,"softhead/"+a.size+"/")),b},getFmImg:function(a){return a.w=a.w||145,a.img?"http://imge.kugou.com/fmlogo/"+a.w+"/"+a.img:"about:blank"},getBangImg:function(a){var b=a.size||"200";return a.img?a.img.replace(/\{size\}/gi,b):KGMO.url.defaultSingerHead},addZero:function(a){return a.toString().length<=1?"0"+a:a},isCanPlayAudio:function(){return document.createElement("audio").canPlayType("audio/mpeg")?!0:!1},isIOS:function(){return navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)?!0:!1},scrollToTop:function(){document.body.scrollTop=0},isScrollBot:function(){var a=document,b=a.body.scrollHeight,c=a.body.clientHeight,d=a.body.scrollTop||a.documentElement.scrollTop;return d+c>=b-62?!0:!1},sendLog:function(a){var b="",c={},d=new Date;a.hash&&(c={pid:8,vt:"",kid:"",hash:a.hash,fn:encodeURIComponent(a.filename),bitrate:a.bitrate||"",ext:a.extname||"",size:a.size||"",cid:"",mid:"",ver:"",nb:"",st:"",flag:"",fb:"",pt:"",ct:d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds(),k:""},b=JSON.stringify(c),document.getElementById("logData").value=b,document.getElementById("logForm").submit())}},_index.user={info:{kugouid:null,userpic:""},clearLogin:function(){Kg.$("#uname,#pwd,#code,#r_uname,#r_pwd,#r_pwd2,#r_email").val(""),_index.user.changeCode({t:Kg.$("#mlogin .code img")[0]})},setUserInfo:function(){var a=_index;Kg.$("#mod_collect .hd img").attr("src",a.user.info.userpic),Kg.$("#mod_collect .hd h5").html(a.user.info.kugouName)},checkLogin:function(){var a=_index,b=a.util.Cookie.read("KuGoo","Pic");a.user.info.kugouid=a.util.Cookie.read("KuGoo","KugooID"),a.user.info.kugouName=unescape(a.util.Cookie.read("KuGoo","NickName")),a.user.info.userpic=b&&"default.jpg"!=b?-1!=b.indexOf("http://")?b:"http://imge.kugou.com/kugouicon/165/"+b.substr(0,8)+"/"+b:"http://imge.kugou.com/kugouicon/165/20120724/20120724145917274529.jpg"},changeCode:function(a){if(a){var b=a.t.src.split("?")[0];a.t.src=b+"?"+Math.random()}},register:function(){{var a=_index,b=Kg.$("#r_uname").val().trim(),c=Kg.$("#r_pwd").val().trim(),d=Kg.$("#r_pwd2").val().trim(),e=Kg.$("#r_email").val().trim(),f=Kg.$("#rcode").val().trim(),g=/[a-zA-Z0-9]+$/,h=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;a.util.getBytes({str:b}),a.util.getBytes({str:c})}return""===b?(alert("请输入账号！"),a.util.scrollToTop(),!1):b.length<4||b.length>80?(alert("请输入4-20位字符账号"),a.util.scrollToTop(),!1):""===c?(alert("请输入密码！"),a.util.scrollToTop(),!1):c.length<6||c.length>16?(alert("密码长度在6-16位！"),a.util.scrollToTop(),!1):g.test(c)?d!=c?(alert("两次输入密码不一致！"),a.util.scrollToTop(),!1):""===e?(alert("请输入邮箱！"),a.util.scrollToTop(),!1):h.test(e)?""===f?(alert("请输入验证码"),a.util.scrollToTop(),!1):(Kg.Ajax({docType:"json",method:"get",url:a.url.loginAndRegUrl,callbackFuncName:"",args:{captcha:f,username:b,password:c,email:e,cmd:401},async:!1,callback:function(b){b&&1==b.status?(alert("注册成功！"),a.user.checkLogin(),a.user.setUserInfo(),a.user.alreadyLogin(),a.user.clearLogin(),a.util.scrollToTop(),a.funs.optMyCollect({cmd:101})):(alert("用户名称冲突"==b.error?"该名称已被注册！":b.error),a.user.changeCode({t:Kg.$("#mreg .code img")[0]}),a.util.scrollToTop())},error:function(){alert(res.error),a.util.scrollToTop()}}),!1):(alert("请输入正确的邮箱格式！"),a.util.scrollToTop(),!1):(alert("密码只能包含字母或数字！"),a.util.scrollToTop(),!1)},login:function(){var a=_index,b=Kg.$("#uname").val().trim(),c=Kg.$("#pwd").val().trim();return""===b?(alert("请输入账号！"),a.util.scrollToTop(),!1):""===c?(alert("请输入密码！"),a.util.scrollToTop(),!1):(Kg.Ajax({docType:"json",method:"get",url:a.url.loginAndRegUrl,args:{username:b,password:c,cmd:400},callback:function(b){b&&1==b.status?(alert("登录成功！"),a.user.checkLogin(),a.user.setUserInfo(),a.user.alreadyLogin(),a.user.clearLogin(),a.util.scrollToTop(),a.funs.optMyCollect({cmd:101})):alert(b.error)},error:function(){alert(res.error)}}),!1)},toLoginPage:function(){location.href="http://m.kugou.com/loginReg.php?act=login&url="+encodeURIComponent(location.href+"?"+Math.random())},toRegPage:function(){location.href="http://m.kugou.com/loginReg.php?act=reg&url="+encodeURIComponent(location.href+"?"+Math.random())},showReg:function(){Kg.$("#mod_header");Kg.$("#searchtit").html("注册"),Kg.$("#mod_collect").hide(),Kg.$("#mlogin").hide(),Kg.$("#nologin").hide(),Kg.$("#mreg").show(),Kg.$("#mod_login").show(),Kg.$("#rcode").val(""),_index.user.changeCode({t:Kg.$("#mreg .code img")[0]})},alreadyLogin:function(){Kg.$("#mod_login").hide(),Kg.$("#mod_collect").show()},showLogin:function(){Kg.$("#mod_header");Kg.$("#mod_collect").hide(),Kg.$("#mreg").hide(),Kg.$("#nologin").hide(),Kg.$("#mlogin").show(),Kg.$("#mod_login").show(),_index.user.changeCode({t:Kg.$("#mlogin .code img")[0]})},logout:function(){var a=_index;a.util.Cookie.remove({name:"KuGoo",path:"/",domain:".kugou.com"}),a.user.info.kugouid=null,a.user.info.kugouName="",a.user.info.userpic="",Kg.$("#mod_collect").hide(),Kg.$("#mlogin").hide(),Kg.$("#mreg").hide(),Kg.$("#nologin").show(),Kg.$("#mod_login").show()}},_index.funs={hideLoading:function(){document.getElementById("loading")&&Kg.$("#loading").hide()},showLoading:function(){document.getElementById("loading")&&Kg.$("#loading").show()},isVisible:function(){return"webkitHidden"in document?!document.webkitHidden:"mozHidden"in document?!document.mozHidden:"hidden"in document?!document.hidden:!0},banDown:function(a,b){a=a||6;var c="http://downmobile.kugou.com/promote/package/download/channel="+a;b&&phpLogClick(b),setTimeout(function(){location.href=c},300)},goBack:function(){document.referrer.match("m.kugou.com")&&window.history.length>0?history.go(-1):location.href=gbParams.kg_domain},goSearch:function(){location.href=gbParams.kg_domain+"/v2/static/html/search.html"},toSearch:function(a){var b=_index;b.global.curTab=4,Kg.$("#mod_search .search_tag").hide(),b.global.search.detail.curPage=1,b.global.search.detail.isLoad=!1,b.global.search.detail.isOver=!1,b.global.search.detail.keyword=a,b.funs.getList()},tagSearch:function(a){var b=_index,c=Kg.$(a.el).html();""!==c&&(Kg.$("#keyword").val(c),b.funs.toSearch(c))},search:function(a){var b=_index,c="";return c=a&&a.keyword?a.keyword:Kg.$("#keyword").val(),c=c.trim(),a.type&&""===c&&(Kg.$("#keyword").val(""),alert("关键字不能为空")),c=c.trim(),""!==c&&b.funs.toSearch(c),!1},getSearchTag:function(){var a=_index,b=Kg.$("#mod_search");a.funs.showLoading(),Kg.Ajax({docType:"jsonp",method:"get",url:a.url.searchTagsUrl,callbackFuncName:"",args:{format:"jsonp",plat:0,count:a.global.search.tags.count},callback:function(c){if(c&&1==c.status){var d=c.data.info,e=[];for(d.length>a.global.search.tags.count&&(d.length=a.global.search.tags.count),i=0;i<d.length;i++)i%2===0&&e.push('<div class="list">'),e.push('<div class="item"><a href="javascript:;" onclick="_index.funs.tagSearch({el:this})" class="pic">'+d[i].keyword+"</a></div>"),i%2===1&&e.push("</div>");a.funs.hideLoading(),b.find(".search_tag").html(e.join("")).show()}a.global.search.isInit=!0},error:function(){a.funs.hideLoading()}})},openApp:function(){var a,b=0,c=navigator.userAgent,d="kugou://start.weixin",e="kugouurl://start.weixin",f="",g="";if(c.match(/iPhone|iPod/)?(g=e,f="itms-apps://itunes.apple.com/cn/app/ku-gou-yin-le/id472208016?mt=8"):c.match(/Android|Adr/)?(g=d,f="http://downmobile.kugou.com/promote/package/download/channel=6"):c.match(/iPad/)&&(g=e,f="itms-apps://itunes.apple.com/cn/app/ku-gou-yin-le/id472208016?mt=8"),1==b)location=g;else if(2==b)f&&(location.href=f);else if(c.match(/Android|Adr/)){var h=document.createElement("iframe");h.style.width="1px",h.style.height="1px",h.style.display="none",a=(new Date).valueOf(),h.src=g,document.body.appendChild(h),setTimeout(function(){if(document.webkitHidden)try{kgplayer.pause()}catch(b){}else{var c=(new Date).valueOf();1550>c-a&&(location.href=f)}},1500)}else c.match(/iPhone|iPad|iPod/)&&(a=(new Date).valueOf(),location.href=g,setTimeout(function(){if(document.webkitHidden)try{kgplayer.pause()}catch(b){}else{var c=(new Date).valueOf();2e3>c-a&&(location.href=f)}},1500))},initSlider:function(){var a=_index;try{if(_index.global.slider)_index.global.slider.setup();else{var b=Kg.$("#mod_slider"),c=Kg.$("#mod_slider .swipe_pos div");a.global.slider=new Swipe(b[0],{auto:6e3,continuous:!0,callback:function(a){c.removeClass("on"),Kg.$(c[a]).addClass("on")}})}}catch(d){}},createSlider:function(){var a=_index,b=document.createDocumentFragment(),c=function(){var c=[],d=_index.global.bannerData,e=d.length,f=Kg.$("#mod_slider");if(c.push('<div class="on"><span></span></div>'),e>0){for(var g=0;e>g;g++){var h=d[g].action,i=d[g].extra,j=document.createElement("div");switch(c.push("<div><span></span></div>"),h){case 1:j.innerHTML='<a href="http://m.kugou.com/v2/static/html/playlistInfo.html?tab=101&id='+d[g].extra.cid+"&tid="+d[g].extra.ctype+'"><img src="'+d[g].bannerurl+'" onerror="this.onerror=null;this.src=\'http://m.kugou.com/static/images/index2013/default_ban.jpg\';" alt=""/></a>',b.appendChild(j);break;case 2:j.innerHTML='<a href="'+i.href+'" target="_blank"><img src="'+d[g].bannerurl+'" onerror="this.onerror=null;this.src=\'http://m.kugou.com/static/images/index2013/default_ban.jpg\';" alt=""/></a>',b.appendChild(j);break;case 3:j.innerHTML='<a href="'+i.href+'" target="_blank"><img src="'+d[g].bannerurl+'" onerror="this.onerror=null;this.src=\'http://m.kugou.com/static/images/index2013/default_ban.jpg\';" alt=""/></a>',b.appendChild(j)}if(3==g)break}f.find(".swipe_wrap")[0].appendChild(b),f.find(".swipe_pos").html(c.join("")),f.show(),a.funs.initSlider()}};a.global.isShowSlider&&Kg.Ajax({docType:"jsonp",method:"get",url:a.url.banner,args:{outputtype:"jsonp",cmd:512,plat:0,num:6},callback:function(b){b&&1==b.status?(a.global.bannerData=b.data,c()):Kg.$("#mod_slider").hide()},error:function(){Kg.$("#mod_slider").hide()}})},showCollectList:function(a){var b=_index;if(Kg.$("#mod_header").find(".btn_back").show(),Kg.$("#mod_header").find(".btn_search").show(),a.id&&!a.back){b.global.collect.detail.cid=a.id;for(var c=0;c<b.global.collect.data.length;c++)if(b.global.collect.detail.cid==b.global.collect.data[c].listid){Kg.$("#searchtit").html(b.global.collect.data[c].listname).show();break}b.global.curTab=300,b.funs.optMyCollect({cmd:102})}else Kg.$("#searchtit").show(),Kg.$("#mod_detailmain .collectdetail").show()},optMyCollect:function(a){var b=_index,c={},d=a.operate||"-1",e=document.createDocumentFragment(),f=function(a){Kg.Ajax({docType:"jsonp",method:"get",url:b.url.collectUrl,callbackFuncName:"",args:a.metadata,callback:function(c){var d=[],f=[],g=0,h=0,i=0;if(c&&1==c.status)if(f=c.data,101==a.cmd){for(b.global.collect.data=f,g=0,h=f.length;h>g;g++)i+=Number(f[g].listfilecount),d.push('<li data-id="'+f[g].listid+'" onclick="_index.funs.showCollectList({id:\''+f[g].listid+'\'})"><div class="ico_star"><i></i></div><span>'+f[g].listname+'</span><div class="count"><em>'+f[g].listfilecount+'</em>首曲目</div><div class="btn_more"><i></i></div></li>');Kg.$("#mod_collect").find(".collect_nums span").html(i),Kg.$("#collectlist").html(d.join("")),b.funs.hideLoading()}else if(102==a.cmd){for(f=b.funs.formatCollectSongs({songs:f}),b.global.collect.detail.data=f,g=0,h=f.length;h>g;g++)op=document.createElement("li"),op.className="songsList",op.id="songs_"+f[g].hash.trim().toUpperCase(),op.innerHTML='<div class="btn_play" onclick="_index.rankinfo.playSong(this); return false;"><i></i></div><a href="'+gbParams.kg_domain+"/play/info/"+f[g].hash+'"><em>'+(g+1)+".</em><span>"+f[g].filename+'</span></a><div class="btn_down" onclick="_index.global.popDown()"><i></i></div>',e.appendChild(op);f.length<1&&(op=document.createElement("li"),op.innerHTML='<span class="nosongs">该收藏列表还没有添加任何歌曲哦！</span>',e.appendChild(op)),Kg.$("#collectdetail")[0].appendChild(e),Kg.$("#collectdetail").show(),Kg.$("#mod_collect").hide(),Kg.$("#mod_detailmain").show()}else 103==a.cmd&&(2==a.operate?alert("删除成功"):3==a.operate?alert("重命名成功"):1==a.operate&&alert("新增列表成功"))},error:function(){}})};if(b.user.info.kugouid>0){if(101==a.cmd)b.funs.showLoading(),c={cmd:101,uid:b.user.info.kugouid,outputtype:"jsonp",d:Math.random()};else if(102==a.cmd)c={cmd:102,listid:b.global.collect.detail.cid,uid:b.user.info.kugouid,outputtype:"jsonp",d:Math.random()};else if(103==a.cmd){for(var g,h=0;h<b.global.collect.data.length;h++)if(b.global.collect.detail.cid==b.global.collect.data[h].listid){g=b.global.collect.data[h].orderweight;break}2==d?c={cmd:103,listid:b.global.collect.detail.cid,operate:2,orderweight:g,uid:b.user.info.kugouid,outputtype:"jsonp",d:Math.random()}:3==d?c={cmd:103,listid:b.global.collect.detail.cid,listname:"%E9%87%8D%E5%91%BD%E5%90%8D%E5%88%97%E8%A1%A8",operate:3,orderweight:g,uid:b.user.info.kugouid,outputtype:"jsonp",d:Math.random()}:1==d&&(c={cmd:103,listid:"",listname:"%E9%87%8D%E5%91%BD%E5%90%8D%E5%88%97%E8%A1%A8",operate:1,orderweight:5,uid:b.user.info.kugouid,outputtype:"jsonp",d:Math.random()})}f({cmd:a.cmd,operate:d,metadata:c})}},formatSingerSongs:function(a){for(var b=[],c=0;c<a.songs.length;c++)b[c]={bitrate:a.songs[c].bitrate,ext:a.songs[c].extname,hash:a.songs[c].hash,filename:a.songs[c].filename,size:a.songs[c].filesize,timelength:a.songs[c].duration};return b},formatCollectSongs:function(a){var b=[];b=a.songs;for(var c=0;c<b.length;c++)b[c].timelength=Math.ceil(b[c].timelength/1e3);return b},formatFmSongs:function(a){for(var b=[],c=0;c<a.songs.length;c++)b[c]={fmid:a.fmid,bitrate:a.songs[c].bitrate,ext:a.songs[c].ext,hash:a.songs[c].hash,filename:a.songs[c].name,size:a.songs[c].size,timelength:Math.ceil(a.songs[c].time/1e3)};return b},playRingSongs:function(a){var b=_index;a&&(kgplayer._default.isPlayRadio=!1,kgplayer._default.isPlayRing=!0,kgplayer.curIndex=a.idx,kgplayer.addSongsNoPlay({songs:b.global.ringlist.detail.data,write:!0}),kgplayer.create())},playFmSongs:function(a){var b=_index,c=[],d=b.global.fmlist.data,e=[];kgplayer._default.isPlayRadio=!0,kgplayer._default.isPlayRing=!1,a.fmid!=b.global.fmlist.detail.fmid&&(b.global.fmlist.detail.offset="",b.global.fmlist.detail.fmid=a.fmid);for(var f=0;f<d.length;f++)if(a.fmid==d[f].fmid&&d[f].fmSongData){e=d[f].fmSongData[0].songs;break}c=b.funs.formatFmSongs({songs:e,fmid:a.fmid}),b.funs.getFmSongs(),kgplayer.addSongsAndPlay({songs:c,write:!0})},getFmSongs:function(){var a=_index,b=[];a.global.fmlist.detail.isLoad||(a.global.fmlist.detail.isLoad=!0,Kg.Ajax({docType:"json",method:"get",url:a.url.fmSongsUrl,args:{fmid:a.global.fmlist.detail.fmid,offset:a.global.fmlist.detail.offset,size:a.global.fmlist.detail.pageSize},callback:function(c){c&&1==c.status&&(a.global.fmlist.detail.offset=c.data[0].offset,b=a.funs.formatFmSongs({songs:c.data[0].songs,fmid:a.global.fmlist.detail.fmid}),kgplayer.addSongsNoPlay({songs:b}),a.global.fmlist.detail.isLoad=!1)},error:function(){a.global.fmlist.detail.isLoad=!1}}))},formatRingSongs:function(a){for(var b=[],c="",d=0;d<a.songs.length;d++)c=""!==a.songs[d].singerName?a.songs[d].singerName+" - "+a.songs[d].songName:a.songs[d].songName,b[d]={filename:c,id:a.songs[d].musicid,songurl:a.songs[d].crbtListenDir,price:a.songs[d].price,data:a.songs[d].crbtValidity,ext:null,bitrate:null,hash:null,size:null,timelength:null};return b},getSpecialInfo:function(){var a=_index,b=Kg.$("#playdetail");Kg.Ajax({docType:"jsonp",method:"get",url:a.url.specialInfo,args:{cmd:108,cid:a.global.playlist.detail.sid,ctype:a.global.playlist.detail.ctype,outputtype:"jsonp"},callback:function(c){c&&1==c.status&&(""!==c.imgurl&&b.find(".hd img").attr("src",a.util.getBangImg({img:c.imgurl})),b.find(".hd p").html(c.description),Kg.$("#tabtitle").html(c.cname),b.find(".hd").show())},error:function(){}})},setList:function(a){var b,c,d=[],e=_index,f="",g=Kg.$("#mod_submain"),h=0,j=!1,k=document.createDocumentFragment();switch(e.global.curTab){case 11:for(e.global.playlist.data=e.global.playlist.data.concat(a.data),b=a.data,i=0,l=b.length;l>i;i++){if(b[i].hash){e.global.playlist.detail.isLoad=!1,j=!0;break}c=document.createElement("li"),c.innerHTML='<a href="http://m.kugou.com/v2/static/html/playlistInfo.html?tab=101&id='+b[i].cid+"&tid="+b[i].ctype+'" class="pic"><img src="'+e.url.defaultSingerHead+'" _def="'+e.url.defaultSingerHead+'" _src="'+e.util.getBangImg({img:b[i].imgurl,size:400})+'" width="100%" alt=""/></a><a href="http://m.kugou.com/v2/static/html/playlistInfo.html?tab=101&id='+b[i].cid+"&tid="+b[i].ctype+'" class="listname">'+b[i].cname+'</a><div class="btn_more"><i></i></div>',k.appendChild(c)}if(j)return;g.find(".subplaylist")[0].appendChild(k),g.find(".subplaylist").show(),1==e.global.playlist.curPage?(g.find(".subplaylist img").each(function(){Kg.$(this).attr("src",Kg.$(this).attr("data-url"))}),e.global.lazy=new Lazyload):e.global.lazy.push(),e.global.playlist.curPage++,e.global.playlist.isLoad=!1,Kg.$("#mod_submain").find(".loadstatus").hide();break;case 12:for(e.global.fmlist.data=e.global.fmlist.data.concat(a.data),b=a.data,i=0,l=b.length;l>i;i++){var m=b[i].fmSongData[0].songs[0];f=m.hash+"|"+Math.ceil(m.time/1e3)+"|"+m.size+"|"+m.bitrate,i%2===0&&(c=document.createElement("div"),c.className="list"),d.push('<div class="item"><a href="javascript:;" onclick="_index.funs.playFmSongs({fmid:'+b[i].fmid+'})" class="pic"><img src="'+e.url.defaultSingerHead+'" _def="'+e.url.defaultSingerHead+'" _src="'+e.util.getFmImg({img:b[i].imgurl})+'" width="100%" alt=""/><span class="fmname">'+b[i].fmname+"</span></a></div>"),i%2===1&&(c.innerHTML=d.join(""),k.appendChild(c),d=[])}g.find(".subfmlist")[0].appendChild(k),g.find(".subfmlist").show(),1==e.global.fmlist.curPage?e.global.lazy=new Lazyload:e.global.lazy.push(),e.global.fmlist.curPage++,e.global.fmlist.isLoad=!1,Kg.$("#mod_submain").find(".loadstatus").hide();break;case 13:for(e.global.ringlist.detail.data=a.data,b=a.data,i=0;i<b.length;i++)d.push('<li><a href="javascript:;" data-idx="'+i+'" class="tit play_ring"><em>'+(i+1)+".</em><span>"+b[i].filename+'</span></a><a href="'+gbParams.kg_domain+"/v2/static/html/orderRing.html?id="+b[i].id+'" class="btn_buy">订购</a></li>');g.find(".subringlist ul").html(d.join("")),g.find(".subringlist").show(),e.global.ringlist.curPage++,e.global.ringlist.isLoad=!1,Kg.$("#mod_submain").find(".loadstatus").hide(),_index.ringlist.bind();break;case 4:for(b=e.funs.formatSingerSongs({songs:a.data}),e.global.search.detail.data=e.global.search.detail.data.concat(b),kgplayer.addSongsNoPlay({songs:_index.global.search.detail.data,write:!0}),b.length<e.global.search.detail.pageSize&&(e.global.search.detail.isOver=!0),i=0,l=b.length;l>i;i++)""!==b[i].hash&&(c=document.createElement("li"),c.id="songs_"+b[i].hash.trim().toUpperCase(),c.innerHTML='<div class="btn_play" onclick="_index.search.playSong(this);return false;"><i></i></div><a href="'+gbParams.kg_domain+"/play/info/"+b[i].hash+'"><em>'+(e.global.search.detail.pageSize*(e.global.search.detail.curPage-1)+i+1)+".</em><span>"+b[i].filename+'</span></a><div class="btn_down" onclick="_index.global.popDown()"><i></i></div>',k.appendChild(c));Kg.$("#search_result ul")[0].appendChild(k),Kg.$("#search_result").show(),e.global.search.detail.curPage++,e.global.search.detail.isLoad=!1;break;case 101:e.global.playlist.detail.data=e.global.playlist.detail.data.concat(a.data),kgplayer.addSongsNoPlay({songs:_index.global.playlist.detail.data,write:!0});var n=Kg.$("#playdetail");for(b=a.data,b.length<e.global.playlist.detail.pageSize&&(e.global.playlist.detail.isOver=!0),h=e.global.playlist.detail.pageSize*(e.global.playlist.detail.curPage-1),i=0,l=b.length;l>i;i++){if(b[i].cid){e.global.playlist.isLoad=!1,j=!0;break}""!==b[i].hash&&(c=document.createElement("li"),c.className="songsList",c.id="songs_"+b[i].hash.trim().toUpperCase(),c.innerHTML='<div class="btn_play" onclick="_index.rankinfo.playSong(this); return false;"><i></i></div><a href="'+gbParams.kg_domain+"/play/info/"+b[i].hash+'"><em>'+(i+h+1)+".</em><span>"+b[i].filename+'</span></a><div class="btn_down" onclick="_index.global.popDown()"><i></i></div>',k.appendChild(c))}if(j)return;n.find(".detaillist")[0].appendChild(k),e.global.playlist.detail.curPage++,e.global.playlist.detail.isLoad=!1,Kg.$("#mod_detailmain").find(".loadstatus").hide()}e.funs.hideLoading()},getList:function(){var a,b=_index,c={};200==b.global.curTab?a=b.global.singerlist.detail.singerid:100==b.global.curTab?a=b.global.banglist.detail.cid:101==b.global.curTab?a=b.global.playlist.detail.sid:20==b.global.curTab&&(a=b.global.singerlist.tid);var d=function(c){Kg.Ajax({docType:c.dataType||"jsonp",method:c.type,url:c.url,args:c.data,callback:function(d){d&&1==d.status?(0===b.global.curTab||200==b.global.curTab||4==b.global.curTab?d.data&&d.data.info.length>0?(b.funs.setList({data:d.data.info,curid:a}),sid=null):(c.isOver(),c.isLoad(),c.cb&&c.cb()):13==b.global.curTab?d.list&&d.list.length>0?b.funs.setList({data:b.funs.formatRingSongs({songs:d.list})}):(c.isOver(),c.isLoad(),c.cb&&c.cb()):d.data&&d.data.length>0?(b.funs.setList({data:d.data,curid:a}),cid=null):(c.isOver(),c.isLoad(),c.cb&&c.cb()),b.funs.hideLoading()):(c.isOver(),c.isLoad())},error:function(){b.funs.hideLoading(),c.err&&c.err()}})};switch(b.global.curTab){case 11:b.global.playlist.isLoad||b.global.playlist.isOver||(b.global.playlist.isLoad=!0,1==b.global.playlist.curPage?b.funs.showLoading():Kg.$("#mod_submain").find(".loadstatus").html("加载中……").show(),c={data:{cmd:106,outputtype:"jsonp",page:b.global.playlist.curPage,pagesize:b.global.playlist.pageSize},url:_index.url.specialUrl,type:"get",isLoad:function(){b.global.playlist.isOver=!1},isOver:function(){b.global.playlist.isOver=!0,$("#mod_submain").find(".loadstatus").hide()},err:function(){b.global.playlist.isLoad=!1,b.util.isOnline()?1==b.global.playlist.curPage?b.funs.changeTab({tab:b.global.curTap}):b.funs.getList():$("#mod_submain").find(".loadstatus").html("加载超时").show()}},d(c));break;case 12:b.global.fmlist.isLoad||b.global.fmlist.isOver||(b.global.fmlist.isLoad=!0,1==b.global.fmlist.curPage?b.funs.showLoading():Kg.$("#mod_submain").find(".loadstatus").html("加载中……").show(),c={dataType:"json",data:{pageindex:b.global.fmlist.curPage,pagesize:b.global.fmlist.pageSize},url:_index.url.fmUrl,type:"get",isLoad:function(){b.global.fmlist.isOver=!1},isOver:function(){b.global.fmlist.isOver=!0,$("#mod_submain").find(".loadstatus").hide()},err:function(){b.global.fmlist.isLoad=!1,b.util.isOnline()?1==b.global.fmlist.curPage?b.funs.changeTab({tab:b.global.curTap}):b.funs.getList():$("#mod_submain").find(".loadstatus").html("加载超时").show()}},d(c));break;case 13:b.global.ringlist.detail.data.length>1?b.funs.setList({data:b.global.ringlist.detail.data}):b.global.ringlist.detail.isLoad||b.global.ringlist.detail.isOver||(b.global.ringlist.detail.isLoad=!0,1==b.global.ringlist.detail.curPage?(b.funs.showLoading(),b.global.ringlist.detail.data=[]):$("#mod_detailmain").find(".loadstatus").html("加载中……").show(),c={dataType:"json",data:{pagesize:b.global.ringlist.detail.pageSize},url:_index.url.ringUrl,type:"get",isLoad:function(){b.global.ringlist.detail.isOver=!1},isOver:function(){b.global.ringlist.detail.isOver=!0,$("#mod_detailmain").find(".loadstatus").hide()},err:function(){b.global.ringlist.detail.isLoad=!1,b.util.isOnline()?b.funs.getList():$("#mod_detailmain").find(".loadstatus").html("加载超时").show()}},d(c));break;case 4:var e=b.global.search.detail;""===e.keyword||e.isLoad||e.isOver||(e.isLoad=!0,1==e.curPage?(b.funs.showLoading(),e.data=[],Kg.$("#search_result ul").html("")):Kg.$("#search_result .loadstatus").html("加载中……").show(),c={data:{format:"jsonp",keyword:decodeURIComponent(e.keyword),page:e.curPage,pagesize:e.pageSize,showtype:1},url:_index.url.searchUrl,type:"get",isLoad:function(){e.isOver=!1},isOver:function(){e.isOver=!0},cb:function(){1==e.curPage&&e.data.length<1&&Kg.$("#search_result").html('<div class="noresult">抱歉，没有找到相关的歌曲</div>')},err:function(){e.isLoad=!1,b.util.isOnline()?b.funs.getList():Kg.$("#search_result").find(".loadstatus").html("加载超时").show()}},d(c));break;case 101:b.global.playlist.detail.isLoad||b.global.playlist.detail.isOver||(b.global.playlist.detail.isLoad=!0,1==b.global.playlist.detail.curPage?(b.funs.showLoading(),b.funs.getSpecialInfo(),b.global.playlist.detail.data=[]):Kg.$("#mod_detailmain").find(".loadstatus").html("加载中……").show(),c={dataType:"jsonp",data:{cmd:107,outputtype:"jsonp",cid:b.global.playlist.detail.sid,page:b.global.playlist.detail.curPage,pagesize:b.global.playlist.detail.pageSize,ctype:b.global.playlist.detail.ctype},url:_index.url.specialUrl,type:"get",isLoad:function(){b.global.playlist.detail.isOver=!1
},isOver:function(){b.global.playlist.detail.isOver=!0,Kg.$("#mod_detailmain").find(".loadstatus").hide()},err:function(){b.global.playlist.detail.isLoad=!1,b.util.isOnline()?b.funs.getList():$("#mod_detailmain").find(".loadstatus").html("加载超时").show()}},d(c))}}},_index.order={isOrder:!1,url:{songInfoUrl:"http://cmccservice.kugou.com/music/info",sendCodeUrl:"http://cmccservice.kugou.com/crbt/getvalidatecode",checkMobileUrl:"http://cmccservice.kugou.com/crbt/chkopen",buyOrderUrl:"http://cmccservice.kugou.com/crbt/order"},countDown:function(a){Kg.$("#countdown");a.time>0?(a.time--,Kg.$(a.dom).attr("dis","true"),setTimeout(function(){Kg.$(a.dom).html("重新获取("+a.time+"s)"),_index.order.countDown(a)},1e3)):(Kg.$(a.dom).html("重新获取"),Kg.$(a.dom).attr("dis","false"))},checkMobileCB:function(a){{var b=_index;Kg.$("#mod_ringorder")}a&&("000000"==a.resCode?b.order.optRing({cmd:2}):(Kg.$("#btn_sendcmccode").attr("dis","false").html("获取短信验证码"),alert("该号码未开通彩铃功能！"),b.util.scrollToTop()))},getRingCodeCB:function(a){var b=_index,c=Kg.$("#mod_ringorder");a&&b.global.ringlist.sendMusicId==b.global.ringlist.musicId&&("000000"==a.resCode?(c.find(".open_phone").html(b.global.ringlist.mobile),c.find(".step1").hide(),c.find(".step2").hide(),c.find(".step3").hide(),c.find(".step2").show(),b.order.countDown({dom:Kg.$("#countdown"),time:60})):alert("301021"==a.resCode?"获取验证码过于频繁！":a.resMsg),b.util.scrollToTop(),Kg.$("#btn_sendcmccode").attr("dis","false").html("获取短信验证码"))},setRingInfoCB:function(a){var b=_index,c=Kg.$("#ringinfo");a&&("000000"==a.resCode?(c.find(".r_songname").html(""!==a.singerName?a.singerName+" - "+a.songName:a.songName),c.find(".r_price").html(parseInt(parseInt(a.price,10)/100,10)),c.find(".r_date").html(a.crbtValidity)):b.order.errCode({code:a.resCode}))},buyOrderCB:function(a){var b=_index;a&&("000000"==a.resCode?alert("订购成功！"):(Kg.$(".btn_sendorder").html("完成订购"),a.resCode.toString().length<4?alert(a.resMsg):b.order.errCode({code:a.resCode}))),b.order.isOrder=!1},optRing:function(a){var b=_index;if(a){var c={},d=function(a){Kg.Ajax({docType:a.dataType,method:"get",url:a.url,args:a.metaData,callback:function(){},error:function(){}})};if(1==a.cmd)c={dataType:"jsonp",url:b.order.url.songInfoUrl,metaData:{musicid:b.global.ringlist.musicId,cb:"_index.order.setRingInfoCB"}},d(c);else if(2==a.cmd){if(a.check&&"true"==Kg.$("#countdown").attr("dis"))return;c={dataType:"jsonp",url:b.order.url.sendCodeUrl,metaData:{mobile:b.global.ringlist.mobile,cb:"_index.order.getRingCodeCB"}},b.global.ringlist.sendMusicId=b.global.ringlist.musicId,d(c)}else 3==a.cmd?(c={dataType:"jsonp",url:b.order.url.checkMobileUrl,metaData:{mobile:a.mobile,cb:"_index.order.checkMobileCB"}},b.global.ringlist.mobile=a.mobile,d(c)):4==a.cmd&&(c={dataType:"jsonp",url:b.order.url.buyOrderUrl,metaData:{pid:5,validatecode:a.code,musicid:b.global.ringlist.musicId,mobile:b.global.ringlist.mobile,cb:"_index.order.buyOrderCB"}},d(c))}},getRingInfo:function(){_index.order.optRing({cmd:1})},sendOrder:function(){var a=_index,b=Kg.$("#cmcmsgcode").val().trim();return""===b?(alert("请输入短信验证码！"),void a.util.scrollToTop()):/^[0-9a-zA-Z]+$/.test(b)?void(a.order.isOrder||(a.order.isOrder=!0,Kg.$(".btn_sendorder").html("请稍后..."),a.order.optRing({cmd:4,code:b}))):(alert("短信验证码不正确！"),void a.util.scrollToTop())},sendCmcCode:function(){var a=_index,b="^1\\d{10}$",c="^((((13[5-9]{1})|(15[0,1,2,7,8,9]{1})|(188)){1}\\d{1})|((134[0-8]{1}){1})){1}\\d{7}$",d=Kg.$("#cmcphone").val().trim(),e=new RegExp(b),f=new RegExp(c);return""===d?(alert("请输入手机号！"),a.util.scrollToTop(),!1):e.test(d)?f.test(d)?(Kg.$("#btn_sendcmccode").attr("dis","true").html("正在获取验证码..."),Kg.$(".btn_sendorder").html("完成订制"),a.order.optRing({cmd:3,mobile:d}),!1):(alert("请输入中国移动手机号码！"),a.util.scrollToTop(),!1):(alert("手机号格式不正确！"),a.util.scrollToTop(),!1)},errCode:function(a){var b=_index;if(a&&a.code){switch(a.code){case"999000":case"999001":case"999002":case"999003":case"999004":case"999005":case"999006":case"999007":case"999008":case"999009":case"999010":case"999011":case"999012":case"999013":case"999014":case"999015":case"999016":case"999017":case"200001":case"200002":case"300001":case"300002":case"300003":case"167231":case"400001":case"400002":case"400003":case"400004":alert("系统繁忙，请稍后重试！");break;case"400000":alert("请输入中国移动手机号码！");break;case"999018":case"999019":alert("验证码错误")}b.util.scrollToTop()}}},_index.index={playing:function(){var a=kgplayer,b=a.songsList[a.curIndex];Kg.$("#mod_songslist .btn_play").removeClass("btn_pause"),Kg.$("#songs_"+b.hash.toUpperCase()).find(".btn_play").addClass("btn_pause")},cusPlay:function(){var a=kgplayer,b=a.songsList[a.curIndex];Kg.$("#mod_songslist .btn_play").removeClass("btn_pause"),document.getElementById(a._default.playId).paused||(Kg.$("#mod_songslist .btn_play").removeClass("btn_pause"),Kg.$("#songs_"+b.hash).find(".btn_play").addClass("btn_pause"),Kg.$("#songname").html(b.filename))},addIndexSongs:function(){var a=[];Kg.$("#mod_songslist li").each(function(b,c){var d=c.id.replace(/^songs_/i,""),e=c.children[1].children[1].innerHTML;a[b]={hash:d.toUpperCase(),filename:e},b++}),kgplayer.addSongsNoPlay({songs:a})},bind:function(){Kg.$("#mod_songslist .btn_play").addEvent("click",function(a){Kg.stopEvent(a);var b=this,c=b.parentNode,d=c.id.replace(/^songs_/i,""),e=c.children[1].children[1].innerHTML,f=kgplayer;if(gbParams.stats.playId&&phpLogClick(gbParams.stats.playId),f.isLoadSrc)return!1;if(f.songsList.length>0)for(var g=0;g<f.songsList.length;g++)if(f.songsList[g].hash==d){f.curIndex!=g?(f.curIndex=g,Kg.$("#mod_newslist .btn_play").removeClass("btn_pause"),Kg.$(b).addClass("btn_pause"),Kg.$("#songname").html(e),f.create()):b.className.match("btn_pause")?(f.pause(),Kg.$(b).removeClass("btn_pause")):(f.play(),Kg.$(b).addClass("btn_pause"));break}return!1}),Kg.$("#mod_newslist .btn_down").addEvent("click",function(a){Kg.stopEvent(a),_index.global.popDown()}),_index.global.bind(),_index.global.bindPop()},init:function(){var a=_index.index;a.addIndexSongs(),kgplayer.cusPlay=a.cusPlay,kgplayer.playing=a.playing,a.bind(),_index.funs.createSlider()}},_index.playlist={bind:function(){setTimeout(function(){Kg.$(window).addEvent("scroll",function(){_index.util.isScrollBot()&&_index.funs.getList()})},1),_index.global.bind()},init:function(){_index.global.curTab=11,_index.funs.getList(),_index.playlist.bind()}},_index.playlistInfo={bind:function(){_index.global.bind(),setTimeout(function(){Kg.$(window).addEvent("scroll",function(){_index.util.isScrollBot()&&_index.funs.getList()})},1),_index.global.bindPop()},init:function(){_index.global.curTab=101,_index.global.playlist.detail.sid=Kg.request.search("id"),_index.global.playlist.detail.ctype=Kg.request.search("tid"),_index.funs.getList(),_index.playlistInfo.bind()}},_index.fmlist={bind:function(){_index.global.bind(),setTimeout(function(){Kg.$(window).addEvent("scroll",function(){_index.util.isScrollBot()&&_index.funs.getList()})},1)},init:function(){_index.global.curTab=12,_index.funs.getList(),_index.fmlist.bind()}},_index.find={setData:function(){_index.global.fmlist.data=gbParams.fmdata,_index.global.ringlist.detail.data=_index.funs.formatRingSongs({songs:gbParams.ringdata})},bind:function(){Kg.$("#fmlist .play_fm").addEvent("click",function(a){Kg.stopEvent(a);var b=this,c=b.getAttribute("data-fmid");return _index.funs.playFmSongs({fmid:c}),!1}),Kg.$("#ringlist .play_ring").addEvent("click",function(a){Kg.stopEvent(a);var b=this,c=b.getAttribute("data-idx");return _index.funs.playRingSongs({idx:c}),!1}),_index.global.bind(),_index.global.lazy=new Lazyload},init:function(){var a=_index.find;kgplayer.getFmSongs=_index.funs.getFmSongs,a.setData(),a.bind()}},_index.orderPage={bind:function(){Kg.$("#btn_sendcmccode").addEvent("click",function(){_index.order.sendCmcCode()}),Kg.$(".btn_cancle").addEvent("click",function(){_index.funs.goBack()}),Kg.$("#countdown").addEvent("click",function(){_index.order.optRing({cmd:2,check:!0})}),Kg.$("#btn_sendorder").addEvent("click",function(){_index.order.sendOrder()}),_index.global.bind()},init:function(){var a=_index.orderPage;_index.global.curTab=131,_index.global.ringlist.musicId=Kg.request.search("id"),_index.order.getRingInfo(),a.bind()}},_index.ringlist={bind:function(){Kg.$("#subringlist .play_ring").addEvent("click",function(a){Kg.stopEvent(a);var b=this,c=b.getAttribute("data-idx");return _index.funs.playRingSongs({idx:c}),!1}),_index.global.bind()},init:function(){_index.ringlist;_index.global.curTab=13,_index.funs.getList()}},_index.collect={check:function(){var a=_index,b=Kg.$("#mod_collect"),c=Kg.$("#mod_login");a.user.checkLogin(),a.user.info.kugouid>0?(a.user.setUserInfo(),a.user.alreadyLogin(),a.funs.optMyCollect({cmd:101})):(b.hide(),Kg.$("#mlogin").hide(),Kg.$("#mreg").hide(),Kg.$("#nologin").show(),c.show())},bind:function(){Kg.$("#btn_login").addEvent("click",function(){_index.user.toLoginPage()}),Kg.$("#btn_sublogin").addEvent("click",function(){_index.user.login()}),Kg.$("#btn_reg").addEvent("click",function(){_index.user.toRegPage()}),Kg.$("#btn_subreg").addEvent("click",function(){_index.user.register()}),Kg.$("#btn_logout").addEvent("click",function(){_index.user.logout()}),_index.global.bind(),_index.global.bindPop()},init:function(){var a=_index.collect;_index.global.curTab=3,a.check(),a.bind()}},_index.search={playing:function(){var a=kgplayer,b=a.songsList[a.curIndex];Kg.$("#bangdetail .btn_play").removeClass("btn_pause"),Kg.$("#songs_"+b.hash.toUpperCase()).find(".btn_play").addClass("btn_pause")},playSong:function(a){var b=a.parentNode,c=b.id.replace(/^songs_/i,""),d=b.children[1].children[1].innerHTML,e=kgplayer;if(gbParams.stats.playId&&phpLogClick(gbParams.stats.playId),e.isLoadSrc)return!1;if(e.songsList.length>0)for(var f=0;f<e.songsList.length;f++)if(e.songsList[f].hash.toUpperCase()==c.toUpperCase()){e.curIndex!=f?(e.curIndex=f,Kg.$("#search_result .btn_play").removeClass("btn_pause"),Kg.$(a).addClass("btn_pause"),Kg.$("#songname").html(d),e.create()):a.className.match("btn_pause")?(e.pause(),Kg.$(a).removeClass("btn_pause")):(e.play(),Kg.$(a).addClass("btn_pause"));break}return!1},cusPlay:function(){var a=kgplayer,b=a.songsList[a.curIndex];Kg.$("#bangdetail .btn_play").removeClass("btn_pause"),document.getElementById(a._default.playId).paused||(Kg.$("#songs_"+b.hash.toUpperCase()).find(".btn_play").addClass("btn_pause"),Kg.$("#songname").html(b.filename))},bind:function(){var a=_index;Kg.$("#btn_sub_search").addEvent("click",function(){a.funs.search({type:!0})}),Kg.$("#search_result a").addEvent("click",function(){var a=this,b={},c=Kg.$(a).attr("data").split("|"),d=Kg.$(a).attr("idx");4==c.length&&(b={type:4,idx:d},KGMO.api.playRankSong(b))}),_index.global.bind(),_index.global.bindPop(),setTimeout(function(){Kg.$(window).addEvent("scroll",function(){_index.util.isScrollBot()&&_index.funs.getList()})},1)},init:function(){var a=_index.search,b=Kg.request.search("keyword");b?(Kg.$("#keyword").html(b),_index.funs.toSearch(b)):_index.funs.getSearchTag(),kgplayer.cusPlay=a.cusPlay,kgplayer.playing=a.playing,a.bind()}},_index.ranklist={bind:function(){_index.global.bind()},init:function(){var a=_index.ranklist;a.bind(),_index.global.lazy=new Lazyload}},_index.rankinfo={playing:function(){var a=kgplayer,b=a.songsList[a.curIndex];Kg.$("#bangdetail .btn_play").removeClass("btn_pause"),Kg.$("#songs_"+b.hash.toUpperCase()).find(".btn_play").addClass("btn_pause")},playSong:function(a){var b=a.parentNode,c=b.id.replace(/^songs_/i,""),d=b.children[1].children[1].innerHTML,e=kgplayer;if(gbParams.stats.playId&&phpLogClick(gbParams.stats.playId),e.isLoadSrc)return!1;if(e.songsList.length>0)for(var f=0;f<e.songsList.length;f++)if(e.songsList[f].hash.toUpperCase()==c.toUpperCase()){e.curIndex!=f?(e.curIndex=f,Kg.$("#detaillist .btn_play").removeClass("btn_pause"),Kg.$(a).addClass("btn_pause"),Kg.$("#songname").html(d),e.create()):a.className.match("btn_pause")?(e.pause(),Kg.$(a).removeClass("btn_pause")):(e.play(),Kg.$(a).addClass("btn_pause"));break}return!1},cusPlay:function(){var a=kgplayer,b=a.songsList[a.curIndex];Kg.$("#bangdetail .btn_play").removeClass("btn_pause"),document.getElementById(a._default.playId).paused||(Kg.$("#bangdetail .btn_play").removeClass("btn_pause"),Kg.$("#songs_"+b.hash).find(".btn_play").addClass("btn_pause"),Kg.$("#songname").html(b.filename))},addIndexSongs:function(){var a=[];Kg.$("#bangdetail li").each(function(b,c){var d=c.id.replace(/^songs_/i,""),e=c.children[1].children[1].innerHTML;a[b]={hash:d.toUpperCase(),filename:e},b++}),kgplayer.addSongsNoPlay({songs:a})},bind:function(){Kg.$("#bangdetail .btn_play").addEvent("click",function(a){Kg.stopEvent(a);var b=this,c=b.parentNode,d=c.id.replace(/^songs_/i,""),e=c.children[1].children[1].innerHTML,f=kgplayer;if(gbParams.stats&&gbParams.stats.playId&&phpLogClick(gbParams.stats.playId),f.isLoadSrc)return!1;if(f.songsList.length>0)for(var g=0;g<f.songsList.length;g++)if(f.songsList[g].hash==d){f.curIndex!=g?(f.curIndex=g,Kg.$("#bangdetail .btn_play").removeClass("btn_pause"),Kg.$(b).addClass("btn_pause"),Kg.$("#songname").html(e),f.create()):b.className.match("btn_pause")?(f.pause(),Kg.$(b).removeClass("btn_pause")):(f.play(),Kg.$(b).addClass("btn_pause"));break}return!1}),Kg.$("#bangdetail .btn_down").addEvent("click",function(a){Kg.stopEvent(a),_index.global.popDown()}),_index.global.bind(),_index.global.bindPop()},init:function(){var a=_index.rankinfo;a.addIndexSongs(),kgplayer.cusPlay=a.cusPlay,kgplayer.playing=a.playing,_index.page.init({url:gbParams.kg_domain+"/rank/info/"+gbParams.rankid+"/{$page}",curPage:gbParams.curPage,pageSize:gbParams.pageSize,totalPage:gbParams.totalPage}),a.bind()}},_index.singerclass={bind:function(){_index.global.bind()},init:function(){_index.singerclass.bind()}},_index.singerlist={bind:function(){_index.global.bind()},init:function(){var a=_index.singerlist;_index.page.init({url:gbParams.kg_domain+"/singer/list/"+gbParams.classid+"/{$page}",curPage:gbParams.curPage,pageSize:gbParams.pageSize,totalPage:gbParams.totalPage}),a.bind()}},_index.singerinfo={playing:function(){var a=kgplayer,b=a.songsList[a.curIndex];Kg.$("#detaillist .btn_play").removeClass("btn_pause"),Kg.$("#songs_"+b.hash.toUpperCase()).find(".btn_play").addClass("btn_pause")},cusPlay:function(){var a=kgplayer,b=a.songsList[a.curIndex];Kg.$("#detaillist .btn_play").removeClass("btn_pause"),document.getElementById(a._default.playId).paused||(Kg.$("#detaillist .btn_play").removeClass("btn_pause"),Kg.$("#songs_"+b.hash).find(".btn_play").addClass("btn_pause"),Kg.$("#songname").html(b.filename))},addIndexSongs:function(){var a=[];Kg.$("#detaillist li").each(function(b,c){var d=c.id.replace(/^songs_/i,""),e=c.children[1].children[1].innerHTML;a[b]={hash:d.toUpperCase(),filename:e},b++}),kgplayer.addSongsNoPlay({songs:a})},bind:function(){Kg.$("#detaillist .btn_play").addEvent("click",function(a){Kg.stopEvent(a);var b=this,c=b.parentNode,d=c.id.replace(/^songs_/i,""),e=c.children[1].children[1].innerHTML,f=kgplayer;if(gbParams.stats.playId&&phpLogClick(gbParams.stats.playId),f.isLoadSrc)return!1;if(f.songsList.length>0)for(var g=0;g<f.songsList.length;g++)if(f.songsList[g].hash==d){f.curIndex!=g?(f.curIndex=g,Kg.$("#detaillist .btn_play").removeClass("btn_pause"),Kg.$(b).addClass("btn_pause"),Kg.$("#songname").html(e),f.create()):b.className.match("btn_pause")?(f.pause(),Kg.$(b).removeClass("btn_pause")):(f.play(),Kg.$(b).addClass("btn_pause"));break}return!1}),Kg.$("#detaillist .btn_down").addEvent("click",function(a){Kg.stopEvent(a),_index.global.popDown()}),_index.global.bind(),_index.global.bindPop()},init:function(){var a=_index.singerinfo;a.addIndexSongs(),kgplayer.cusPlay=a.cusPlay,kgplayer.playing=a.playing,a.bind()}},_index.play={bind:function(){Kg.$("#btn_download").addEvent("click",function(a){return Kg.stopEvent(a),_index.global.popDown(),!1}),Kg.$("#pop_down .close").addEvent("click",function(){Kg.$("#pop_down").hide(),Kg.$("#pop_bg").removeClass("pop_bg_show").hide()}),Kg.$("#btn_change").addEvent("click",function(){var a=Kg.$("#mod_mainplayer");_index.global.isCover?(a.find(".lrc").show(),a.find(".cover").hide(),a.find(".btn_change").removeClass("btn_cover").addClass("btn_lrc"),_index.global.isCover=!1):(a.find(".lrc").hide(),a.find(".cover").show(),a.find(".btn_change").removeClass("btn_lrc").addClass("btn_cover"),_index.global.isCover=!0)}),_index.global.bind()},setSongs:function(){var a=[],b=gbParams.songs;a[0]={filename:b.filename||"",songurl:b.url,timeLength:b.duration,lrc:gbParams.lrc},kgplayer.addSongsAndPlay({songs:a,write:!0})},init:function(){var a=_index.play;a.setSongs(),a.bind()}},_index.hezuo={zjhn:function(){var a=document;a.getElementById("mod_header")&&(a.getElementById("mod_header").className+=" mod_header_zjhn"),a.getElementById("btn_ind_down")&&(a.getElementById("btn_ind_down").style.display="none"),a.getElementById("logo_zjhn")&&(a.getElementById("logo_zjhn").style.display="block")},bind:function(a){var b=_index.hezuo,c=document;switch(a&&Kg.Cookie.write("kg_theme",a,0,"/"),a){case"zjhn":b.zjhn();break;default:c.getElementById("btn_ind_down")&&(c.getElementById("btn_ind_down").style.display="block")}},init:function(){var a=_index.hezuo,b=Kg.request.search("fr");b?a.bind(b):b=Kg.Cookie.read("kg_theme"),a.bind(b)}};
